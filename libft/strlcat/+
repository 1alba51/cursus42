// Esta función concatena una cadena de origen a una cadena de destino, incluyendo el tamaño del búfer de destino como argumento.
// Copia la cadena de origen al final de la cadena de destino hasta que el búfer está lleno o se alcanza el carácter nulo de la cadena de origen.
// La función devuelve la longiud que habría tenido la cadena si no hubiera habido limitación de tamaño (longitud de dst original más la longitud de src).
// El prototipo de la función será:
// 			size_t	ft_strlcat(char *dst, const char *src, size_t size);

#include <stdio.h>
#include <string.h>

size_t	ft_strlcat(char *dst, const char *src, size_t size)
{
	size_t	dst_length;
	size_t	src_length;
	size_t	i;

	dst_length = 0;
	src_length = 0;
	i = 0;
	while (dst[dst_length])
		dst_length++;
	while (src[src_length]) {
		src_length++;
	}
	if (dst_length < size) {
		while (i < (size - 1) - dst_length && src[i] != '\0') {
			dst[i + dst_length] = src[i];
			i++;
		}
		dst[i + dst_length] = '\0';
		return (dst_length + src_length);
	}
	return (size + src_length);
}

// 1. Calculamos la longitud de la cadena de destino, para poder saber donde empezar a copiar
// 2. Verificamos si hay espacio en dst para concatenar.
// 3. Copiamos todo lo que quepa de src en dst mientras haya espacio disponible, dejando hueco para el nulo al final
// 4. Añadimos el nulo al final de dst.
// 5. Devolvemos la longitud que se ha intentado crear, concatenando las dos cadenas. (longitud inicial de dst + longitud completa de src)

int	main(void)
{
	char	dst1[20] = "Hello";
	size_t	result;

	printf("-----Prueba 1: espacio suficiente-----\n");
	result = ft_strlcat(dst1, " World", 20);
	printf("Resultado: '%s'\n", dst1);
	printf("Valor devuelto: '%ld'\n\n", result);

	printf("-----Prueba 2: espacio limitado-----\n");
	strcpy(dst1, "Hello");
	result = ft_strlcat(dst1, " World!", 10);
	printf("Resultado: '%s'\n", dst1);
	printf("Valor devuelto: '%ld' (intentó crear una de longitud: '%ld')\n\n", result, result);

	printf("-----Prueba 3: size <= longitud dst-----\n");
	strcpy(dst1, "Hello");
	result = ft_strlcat(dst1, " World", 3);
	printf("Resultado: '%s'\n", dst1);
	printf("Valor devuelto: %ld\n\n", result);

	printf("-----Prueba 4: dst vacío-----\n");
	dst1[0] = '\0';
	result = ft_strlcat(dst1, "Hello", 20);
	printf("Resultado: '%s'\n", dst1);
	printf("Valor devuelto: '%ld'\n\n", result);

	printf("-----Prueba 5: src vacío-----\n");
	strcpy(dst1, "Hello");
	result = ft_strlcat(dst1, "", 20);
	printf("Resultado: '%s'\n", dst1);
	printf("Valor devuelto: '%ld'\n\n", result);

	return(0);
}
